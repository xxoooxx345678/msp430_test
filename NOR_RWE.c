#include <msp430.h>
#include "driverlib.h"
#include "NOR_RWE.h"

#include "inc/hw_memmap.h"

void NOR_byte_write(uint8_t *ptr)
{
    //Clear Lock bit
    HWREG16(FLASH_BASE + OFS_FCTL3) = FWKEY;

    //Enable byte/word write mode
    HWREG16(FLASH_BASE + OFS_FCTL1) = FWKEY + WRT;

    *(ptr + 0) = 0;
    *(ptr + 1) = 1;
    *(ptr + 2) = 2;
    *(ptr + 3) = 3;
    *(ptr + 4) = 4;
    *(ptr + 5) = 5;
    *(ptr + 6) = 6;
    *(ptr + 7) = 7;
    *(ptr + 8) = 8;
    *(ptr + 9) = 9;
    *(ptr + 10) = 10;
    *(ptr + 11) = 11;
    *(ptr + 12) = 12;
    *(ptr + 13) = 13;
    *(ptr + 14) = 14;
    *(ptr + 15) = 15;
    *(ptr + 16) = 16;
    *(ptr + 17) = 17;
    *(ptr + 18) = 18;
    *(ptr + 19) = 19;
    *(ptr + 20) = 20;
    *(ptr + 21) = 21;
    *(ptr + 22) = 22;
    *(ptr + 23) = 23;
    *(ptr + 24) = 24;
    *(ptr + 25) = 25;
    *(ptr + 26) = 26;
    *(ptr + 27) = 27;
    *(ptr + 28) = 28;
    *(ptr + 29) = 29;
    *(ptr + 30) = 30;
    *(ptr + 31) = 31;
    *(ptr + 32) = 32;
    *(ptr + 33) = 33;
    *(ptr + 34) = 34;
    *(ptr + 35) = 35;
    *(ptr + 36) = 36;
    *(ptr + 37) = 37;
    *(ptr + 38) = 38;
    *(ptr + 39) = 39;
    *(ptr + 40) = 40;
    *(ptr + 41) = 41;
    *(ptr + 42) = 42;
    *(ptr + 43) = 43;
    *(ptr + 44) = 44;
    *(ptr + 45) = 45;
    *(ptr + 46) = 46;
    *(ptr + 47) = 47;
    *(ptr + 48) = 48;
    *(ptr + 49) = 49;
    *(ptr + 50) = 50;
    *(ptr + 51) = 51;
    *(ptr + 52) = 52;
    *(ptr + 53) = 53;
    *(ptr + 54) = 54;
    *(ptr + 55) = 55;
    *(ptr + 56) = 56;
    *(ptr + 57) = 57;
    *(ptr + 58) = 58;
    *(ptr + 59) = 59;
    *(ptr + 60) = 60;
    *(ptr + 61) = 61;
    *(ptr + 62) = 62;
    *(ptr + 63) = 63;
    *(ptr + 64) = 64;
    *(ptr + 65) = 65;
    *(ptr + 66) = 66;
    *(ptr + 67) = 67;
    *(ptr + 68) = 68;
    *(ptr + 69) = 69;
    *(ptr + 70) = 70;
    *(ptr + 71) = 71;
    *(ptr + 72) = 72;
    *(ptr + 73) = 73;
    *(ptr + 74) = 74;
    *(ptr + 75) = 75;
    *(ptr + 76) = 76;
    *(ptr + 77) = 77;
    *(ptr + 78) = 78;
    *(ptr + 79) = 79;
    *(ptr + 80) = 80;
    *(ptr + 81) = 81;
    *(ptr + 82) = 82;
    *(ptr + 83) = 83;
    *(ptr + 84) = 84;
    *(ptr + 85) = 85;
    *(ptr + 86) = 86;
    *(ptr + 87) = 87;
    *(ptr + 88) = 88;
    *(ptr + 89) = 89;
    *(ptr + 90) = 90;
    *(ptr + 91) = 91;
    *(ptr + 92) = 92;
    *(ptr + 93) = 93;
    *(ptr + 94) = 94;
    *(ptr + 95) = 95;
    *(ptr + 96) = 96;
    *(ptr + 97) = 97;
    *(ptr + 98) = 98;
    *(ptr + 99) = 99;
    *(ptr + 100) = 100;
    *(ptr + 101) = 101;
    *(ptr + 102) = 102;
    *(ptr + 103) = 103;
    *(ptr + 104) = 104;
    *(ptr + 105) = 105;
    *(ptr + 106) = 106;
    *(ptr + 107) = 107;
    *(ptr + 108) = 108;
    *(ptr + 109) = 109;
    *(ptr + 110) = 110;
    *(ptr + 111) = 111;
    *(ptr + 112) = 112;
    *(ptr + 113) = 113;
    *(ptr + 114) = 114;
    *(ptr + 115) = 115;
    *(ptr + 116) = 116;
    *(ptr + 117) = 117;
    *(ptr + 118) = 118;
    *(ptr + 119) = 119;
    *(ptr + 120) = 120;
    *(ptr + 121) = 121;
    *(ptr + 122) = 122;
    *(ptr + 123) = 123;
    *(ptr + 124) = 124;
    *(ptr + 125) = 125;
    *(ptr + 126) = 126;
    *(ptr + 127) = 127;
    *(ptr + 128) = 128;
    *(ptr + 129) = 129;
    *(ptr + 130) = 130;
    *(ptr + 131) = 131;
    *(ptr + 132) = 132;
    *(ptr + 133) = 133;
    *(ptr + 134) = 134;
    *(ptr + 135) = 135;
    *(ptr + 136) = 136;
    *(ptr + 137) = 137;
    *(ptr + 138) = 138;
    *(ptr + 139) = 139;
    *(ptr + 140) = 140;
    *(ptr + 141) = 141;
    *(ptr + 142) = 142;
    *(ptr + 143) = 143;
    *(ptr + 144) = 144;
    *(ptr + 145) = 145;
    *(ptr + 146) = 146;
    *(ptr + 147) = 147;
    *(ptr + 148) = 148;
    *(ptr + 149) = 149;
    *(ptr + 150) = 150;
    *(ptr + 151) = 151;
    *(ptr + 152) = 152;
    *(ptr + 153) = 153;
    *(ptr + 154) = 154;
    *(ptr + 155) = 155;
    *(ptr + 156) = 156;
    *(ptr + 157) = 157;
    *(ptr + 158) = 158;
    *(ptr + 159) = 159;
    *(ptr + 160) = 160;
    *(ptr + 161) = 161;
    *(ptr + 162) = 162;
    *(ptr + 163) = 163;
    *(ptr + 164) = 164;
    *(ptr + 165) = 165;
    *(ptr + 166) = 166;
    *(ptr + 167) = 167;
    *(ptr + 168) = 168;
    *(ptr + 169) = 169;
    *(ptr + 170) = 170;
    *(ptr + 171) = 171;
    *(ptr + 172) = 172;
    *(ptr + 173) = 173;
    *(ptr + 174) = 174;
    *(ptr + 175) = 175;
    *(ptr + 176) = 176;
    *(ptr + 177) = 177;
    *(ptr + 178) = 178;
    *(ptr + 179) = 179;
    *(ptr + 180) = 180;
    *(ptr + 181) = 181;
    *(ptr + 182) = 182;
    *(ptr + 183) = 183;
    *(ptr + 184) = 184;
    *(ptr + 185) = 185;
    *(ptr + 186) = 186;
    *(ptr + 187) = 187;
    *(ptr + 188) = 188;
    *(ptr + 189) = 189;
    *(ptr + 190) = 190;
    *(ptr + 191) = 191;
    *(ptr + 192) = 192;
    *(ptr + 193) = 193;
    *(ptr + 194) = 194;
    *(ptr + 195) = 195;
    *(ptr + 196) = 196;
    *(ptr + 197) = 197;
    *(ptr + 198) = 198;
    *(ptr + 199) = 199;
    *(ptr + 200) = 200;
    *(ptr + 201) = 201;
    *(ptr + 202) = 202;
    *(ptr + 203) = 203;
    *(ptr + 204) = 204;
    *(ptr + 205) = 205;
    *(ptr + 206) = 206;
    *(ptr + 207) = 207;
    *(ptr + 208) = 208;
    *(ptr + 209) = 209;
    *(ptr + 210) = 210;
    *(ptr + 211) = 211;
    *(ptr + 212) = 212;
    *(ptr + 213) = 213;
    *(ptr + 214) = 214;
    *(ptr + 215) = 215;
    *(ptr + 216) = 216;
    *(ptr + 217) = 217;
    *(ptr + 218) = 218;
    *(ptr + 219) = 219;
    *(ptr + 220) = 220;
    *(ptr + 221) = 221;
    *(ptr + 222) = 222;
    *(ptr + 223) = 223;
    *(ptr + 224) = 224;
    *(ptr + 225) = 225;
    *(ptr + 226) = 226;
    *(ptr + 227) = 227;
    *(ptr + 228) = 228;
    *(ptr + 229) = 229;
    *(ptr + 230) = 230;
    *(ptr + 231) = 231;
    *(ptr + 232) = 232;
    *(ptr + 233) = 233;
    *(ptr + 234) = 234;
    *(ptr + 235) = 235;
    *(ptr + 236) = 236;
    *(ptr + 237) = 237;
    *(ptr + 238) = 238;
    *(ptr + 239) = 239;
    *(ptr + 240) = 240;
    *(ptr + 241) = 241;
    *(ptr + 242) = 242;
    *(ptr + 243) = 243;
    *(ptr + 244) = 244;
    *(ptr + 245) = 245;
    *(ptr + 246) = 246;
    *(ptr + 247) = 247;
    *(ptr + 248) = 248;
    *(ptr + 249) = 249;
    *(ptr + 250) = 250;
    *(ptr + 251) = 251;
    *(ptr + 252) = 252;
    *(ptr + 253) = 253;
    *(ptr + 254) = 254;
    *(ptr + 255) = 255;
    *(ptr + 256) = 254;
    *(ptr + 257) = 253;
    *(ptr + 258) = 252;
    *(ptr + 259) = 251;
    *(ptr + 260) = 250;
    *(ptr + 261) = 249;
    *(ptr + 262) = 248;
    *(ptr + 263) = 247;
    *(ptr + 264) = 246;
    *(ptr + 265) = 245;
    *(ptr + 266) = 244;
    *(ptr + 267) = 243;
    *(ptr + 268) = 242;
    *(ptr + 269) = 241;
    *(ptr + 270) = 240;
    *(ptr + 271) = 239;
    *(ptr + 272) = 238;
    *(ptr + 273) = 237;
    *(ptr + 274) = 236;
    *(ptr + 275) = 235;
    *(ptr + 276) = 234;
    *(ptr + 277) = 233;
    *(ptr + 278) = 232;
    *(ptr + 279) = 231;
    *(ptr + 280) = 230;
    *(ptr + 281) = 229;
    *(ptr + 282) = 228;
    *(ptr + 283) = 227;
    *(ptr + 284) = 226;
    *(ptr + 285) = 225;
    *(ptr + 286) = 224;
    *(ptr + 287) = 223;
    *(ptr + 288) = 222;
    *(ptr + 289) = 221;
    *(ptr + 290) = 220;
    *(ptr + 291) = 219;
    *(ptr + 292) = 218;
    *(ptr + 293) = 217;
    *(ptr + 294) = 216;
    *(ptr + 295) = 215;
    *(ptr + 296) = 214;
    *(ptr + 297) = 213;
    *(ptr + 298) = 212;
    *(ptr + 299) = 211;
    *(ptr + 300) = 210;
    *(ptr + 301) = 209;
    *(ptr + 302) = 208;
    *(ptr + 303) = 207;
    *(ptr + 304) = 206;
    *(ptr + 305) = 205;
    *(ptr + 306) = 204;
    *(ptr + 307) = 203;
    *(ptr + 308) = 202;
    *(ptr + 309) = 201;
    *(ptr + 310) = 200;
    *(ptr + 311) = 199;
    *(ptr + 312) = 198;
    *(ptr + 313) = 197;
    *(ptr + 314) = 196;
    *(ptr + 315) = 195;
    *(ptr + 316) = 194;
    *(ptr + 317) = 193;
    *(ptr + 318) = 192;
    *(ptr + 319) = 191;
    *(ptr + 320) = 190;
    *(ptr + 321) = 189;
    *(ptr + 322) = 188;
    *(ptr + 323) = 187;
    *(ptr + 324) = 186;
    *(ptr + 325) = 185;
    *(ptr + 326) = 184;
    *(ptr + 327) = 183;
    *(ptr + 328) = 182;
    *(ptr + 329) = 181;
    *(ptr + 330) = 180;
    *(ptr + 331) = 179;
    *(ptr + 332) = 178;
    *(ptr + 333) = 177;
    *(ptr + 334) = 176;
    *(ptr + 335) = 175;
    *(ptr + 336) = 174;
    *(ptr + 337) = 173;
    *(ptr + 338) = 172;
    *(ptr + 339) = 171;
    *(ptr + 340) = 170;
    *(ptr + 341) = 169;
    *(ptr + 342) = 168;
    *(ptr + 343) = 167;
    *(ptr + 344) = 166;
    *(ptr + 345) = 165;
    *(ptr + 346) = 164;
    *(ptr + 347) = 163;
    *(ptr + 348) = 162;
    *(ptr + 349) = 161;
    *(ptr + 350) = 160;
    *(ptr + 351) = 159;
    *(ptr + 352) = 158;
    *(ptr + 353) = 157;
    *(ptr + 354) = 156;
    *(ptr + 355) = 155;
    *(ptr + 356) = 154;
    *(ptr + 357) = 153;
    *(ptr + 358) = 152;
    *(ptr + 359) = 151;
    *(ptr + 360) = 150;
    *(ptr + 361) = 149;
    *(ptr + 362) = 148;
    *(ptr + 363) = 147;
    *(ptr + 364) = 146;
    *(ptr + 365) = 145;
    *(ptr + 366) = 144;
    *(ptr + 367) = 143;
    *(ptr + 368) = 142;
    *(ptr + 369) = 141;
    *(ptr + 370) = 140;
    *(ptr + 371) = 139;
    *(ptr + 372) = 138;
    *(ptr + 373) = 137;
    *(ptr + 374) = 136;
    *(ptr + 375) = 135;
    *(ptr + 376) = 134;
    *(ptr + 377) = 133;
    *(ptr + 378) = 132;
    *(ptr + 379) = 131;
    *(ptr + 380) = 130;
    *(ptr + 381) = 129;
    *(ptr + 382) = 128;
    *(ptr + 383) = 127;
    *(ptr + 384) = 126;
    *(ptr + 385) = 125;
    *(ptr + 386) = 124;
    *(ptr + 387) = 123;
    *(ptr + 388) = 122;
    *(ptr + 389) = 121;
    *(ptr + 390) = 120;
    *(ptr + 391) = 119;
    *(ptr + 392) = 118;
    *(ptr + 393) = 117;
    *(ptr + 394) = 116;
    *(ptr + 395) = 115;
    *(ptr + 396) = 114;
    *(ptr + 397) = 113;
    *(ptr + 398) = 112;
    *(ptr + 399) = 111;
    *(ptr + 400) = 110;
    *(ptr + 401) = 109;
    *(ptr + 402) = 108;
    *(ptr + 403) = 107;
    *(ptr + 404) = 106;
    *(ptr + 405) = 105;
    *(ptr + 406) = 104;
    *(ptr + 407) = 103;
    *(ptr + 408) = 102;
    *(ptr + 409) = 101;
    *(ptr + 410) = 100;
    *(ptr + 411) = 99;
    *(ptr + 412) = 98;
    *(ptr + 413) = 97;
    *(ptr + 414) = 96;
    *(ptr + 415) = 95;
    *(ptr + 416) = 94;
    *(ptr + 417) = 93;
    *(ptr + 418) = 92;
    *(ptr + 419) = 91;
    *(ptr + 420) = 90;
    *(ptr + 421) = 89;
    *(ptr + 422) = 88;
    *(ptr + 423) = 87;
    *(ptr + 424) = 86;
    *(ptr + 425) = 85;
    *(ptr + 426) = 84;
    *(ptr + 427) = 83;
    *(ptr + 428) = 82;
    *(ptr + 429) = 81;
    *(ptr + 430) = 80;
    *(ptr + 431) = 79;
    *(ptr + 432) = 78;
    *(ptr + 433) = 77;
    *(ptr + 434) = 76;
    *(ptr + 435) = 75;
    *(ptr + 436) = 74;
    *(ptr + 437) = 73;
    *(ptr + 438) = 72;
    *(ptr + 439) = 71;
    *(ptr + 440) = 70;
    *(ptr + 441) = 69;
    *(ptr + 442) = 68;
    *(ptr + 443) = 67;
    *(ptr + 444) = 66;
    *(ptr + 445) = 65;
    *(ptr + 446) = 64;
    *(ptr + 447) = 63;
    *(ptr + 448) = 62;
    *(ptr + 449) = 61;
    *(ptr + 450) = 60;
    *(ptr + 451) = 59;
    *(ptr + 452) = 58;
    *(ptr + 453) = 57;
    *(ptr + 454) = 56;
    *(ptr + 455) = 55;
    *(ptr + 456) = 54;
    *(ptr + 457) = 53;
    *(ptr + 458) = 52;
    *(ptr + 459) = 51;
    *(ptr + 460) = 50;
    *(ptr + 461) = 49;
    *(ptr + 462) = 48;
    *(ptr + 463) = 47;
    *(ptr + 464) = 46;
    *(ptr + 465) = 45;
    *(ptr + 466) = 44;
    *(ptr + 467) = 43;
    *(ptr + 468) = 42;
    *(ptr + 469) = 41;
    *(ptr + 470) = 40;
    *(ptr + 471) = 39;
    *(ptr + 472) = 38;
    *(ptr + 473) = 37;
    *(ptr + 474) = 36;
    *(ptr + 475) = 35;
    *(ptr + 476) = 34;
    *(ptr + 477) = 33;
    *(ptr + 478) = 32;
    *(ptr + 479) = 31;
    *(ptr + 480) = 30;
    *(ptr + 481) = 29;
    *(ptr + 482) = 28;
    *(ptr + 483) = 27;
    *(ptr + 484) = 26;
    *(ptr + 485) = 25;
    *(ptr + 486) = 24;
    *(ptr + 487) = 23;
    *(ptr + 488) = 22;
    *(ptr + 489) = 21;
    *(ptr + 490) = 20;
    *(ptr + 491) = 19;
    *(ptr + 492) = 18;
    *(ptr + 493) = 17;
    *(ptr + 494) = 16;
    *(ptr + 495) = 15;
    *(ptr + 496) = 14;
    *(ptr + 497) = 13;
    *(ptr + 498) = 12;
    *(ptr + 499) = 11;
    *(ptr + 500) = 10;
    *(ptr + 501) = 9;
    *(ptr + 502) = 8;
    *(ptr + 503) = 7;
    *(ptr + 504) = 6;
    *(ptr + 505) = 5;
    *(ptr + 506) = 4;
    *(ptr + 507) = 3;
    *(ptr + 508) = 2;
    *(ptr + 509) = 1;
    *(ptr + 510) = 0;
    *(ptr + 511) = 255;

    //Clear WRT bit
    HWREG16(FLASH_BASE + OFS_FCTL1) = FWKEY;

    //Set LOCK bit
    HWREG16(FLASH_BASE + OFS_FCTL3) = FWKEY + LOCK;
}

void NOR_byte_read(uint8_t *ptr)
{

    volatile uint8_t dummy;

    dummy = *(ptr + 0);
    dummy = *(ptr + 1);
    dummy = *(ptr + 2);
    dummy = *(ptr + 3);
    dummy = *(ptr + 4);
    dummy = *(ptr + 5);
    dummy = *(ptr + 6);
    dummy = *(ptr + 7);
    dummy = *(ptr + 8);
    dummy = *(ptr + 9);
    dummy = *(ptr + 10);
    dummy = *(ptr + 11);
    dummy = *(ptr + 12);
    dummy = *(ptr + 13);
    dummy = *(ptr + 14);
    dummy = *(ptr + 15);
    dummy = *(ptr + 16);
    dummy = *(ptr + 17);
    dummy = *(ptr + 18);
    dummy = *(ptr + 19);
    dummy = *(ptr + 20);
    dummy = *(ptr + 21);
    dummy = *(ptr + 22);
    dummy = *(ptr + 23);
    dummy = *(ptr + 24);
    dummy = *(ptr + 25);
    dummy = *(ptr + 26);
    dummy = *(ptr + 27);
    dummy = *(ptr + 28);
    dummy = *(ptr + 29);
    dummy = *(ptr + 30);
    dummy = *(ptr + 31);
    dummy = *(ptr + 32);
    dummy = *(ptr + 33);
    dummy = *(ptr + 34);
    dummy = *(ptr + 35);
    dummy = *(ptr + 36);
    dummy = *(ptr + 37);
    dummy = *(ptr + 38);
    dummy = *(ptr + 39);
    dummy = *(ptr + 40);
    dummy = *(ptr + 41);
    dummy = *(ptr + 42);
    dummy = *(ptr + 43);
    dummy = *(ptr + 44);
    dummy = *(ptr + 45);
    dummy = *(ptr + 46);
    dummy = *(ptr + 47);
    dummy = *(ptr + 48);
    dummy = *(ptr + 49);
    dummy = *(ptr + 50);
    dummy = *(ptr + 51);
    dummy = *(ptr + 52);
    dummy = *(ptr + 53);
    dummy = *(ptr + 54);
    dummy = *(ptr + 55);
    dummy = *(ptr + 56);
    dummy = *(ptr + 57);
    dummy = *(ptr + 58);
    dummy = *(ptr + 59);
    dummy = *(ptr + 60);
    dummy = *(ptr + 61);
    dummy = *(ptr + 62);
    dummy = *(ptr + 63);
    dummy = *(ptr + 64);
    dummy = *(ptr + 65);
    dummy = *(ptr + 66);
    dummy = *(ptr + 67);
    dummy = *(ptr + 68);
    dummy = *(ptr + 69);
    dummy = *(ptr + 70);
    dummy = *(ptr + 71);
    dummy = *(ptr + 72);
    dummy = *(ptr + 73);
    dummy = *(ptr + 74);
    dummy = *(ptr + 75);
    dummy = *(ptr + 76);
    dummy = *(ptr + 77);
    dummy = *(ptr + 78);
    dummy = *(ptr + 79);
    dummy = *(ptr + 80);
    dummy = *(ptr + 81);
    dummy = *(ptr + 82);
    dummy = *(ptr + 83);
    dummy = *(ptr + 84);
    dummy = *(ptr + 85);
    dummy = *(ptr + 86);
    dummy = *(ptr + 87);
    dummy = *(ptr + 88);
    dummy = *(ptr + 89);
    dummy = *(ptr + 90);
    dummy = *(ptr + 91);
    dummy = *(ptr + 92);
    dummy = *(ptr + 93);
    dummy = *(ptr + 94);
    dummy = *(ptr + 95);
    dummy = *(ptr + 96);
    dummy = *(ptr + 97);
    dummy = *(ptr + 98);
    dummy = *(ptr + 99);
    dummy = *(ptr + 100);
    dummy = *(ptr + 101);
    dummy = *(ptr + 102);
    dummy = *(ptr + 103);
    dummy = *(ptr + 104);
    dummy = *(ptr + 105);
    dummy = *(ptr + 106);
    dummy = *(ptr + 107);
    dummy = *(ptr + 108);
    dummy = *(ptr + 109);
    dummy = *(ptr + 110);
    dummy = *(ptr + 111);
    dummy = *(ptr + 112);
    dummy = *(ptr + 113);
    dummy = *(ptr + 114);
    dummy = *(ptr + 115);
    dummy = *(ptr + 116);
    dummy = *(ptr + 117);
    dummy = *(ptr + 118);
    dummy = *(ptr + 119);
    dummy = *(ptr + 120);
    dummy = *(ptr + 121);
    dummy = *(ptr + 122);
    dummy = *(ptr + 123);
    dummy = *(ptr + 124);
    dummy = *(ptr + 125);
    dummy = *(ptr + 126);
    dummy = *(ptr + 127);
    dummy = *(ptr + 128);
    dummy = *(ptr + 129);
    dummy = *(ptr + 130);
    dummy = *(ptr + 131);
    dummy = *(ptr + 132);
    dummy = *(ptr + 133);
    dummy = *(ptr + 134);
    dummy = *(ptr + 135);
    dummy = *(ptr + 136);
    dummy = *(ptr + 137);
    dummy = *(ptr + 138);
    dummy = *(ptr + 139);
    dummy = *(ptr + 140);
    dummy = *(ptr + 141);
    dummy = *(ptr + 142);
    dummy = *(ptr + 143);
    dummy = *(ptr + 144);
    dummy = *(ptr + 145);
    dummy = *(ptr + 146);
    dummy = *(ptr + 147);
    dummy = *(ptr + 148);
    dummy = *(ptr + 149);
    dummy = *(ptr + 150);
    dummy = *(ptr + 151);
    dummy = *(ptr + 152);
    dummy = *(ptr + 153);
    dummy = *(ptr + 154);
    dummy = *(ptr + 155);
    dummy = *(ptr + 156);
    dummy = *(ptr + 157);
    dummy = *(ptr + 158);
    dummy = *(ptr + 159);
    dummy = *(ptr + 160);
    dummy = *(ptr + 161);
    dummy = *(ptr + 162);
    dummy = *(ptr + 163);
    dummy = *(ptr + 164);
    dummy = *(ptr + 165);
    dummy = *(ptr + 166);
    dummy = *(ptr + 167);
    dummy = *(ptr + 168);
    dummy = *(ptr + 169);
    dummy = *(ptr + 170);
    dummy = *(ptr + 171);
    dummy = *(ptr + 172);
    dummy = *(ptr + 173);
    dummy = *(ptr + 174);
    dummy = *(ptr + 175);
    dummy = *(ptr + 176);
    dummy = *(ptr + 177);
    dummy = *(ptr + 178);
    dummy = *(ptr + 179);
    dummy = *(ptr + 180);
    dummy = *(ptr + 181);
    dummy = *(ptr + 182);
    dummy = *(ptr + 183);
    dummy = *(ptr + 184);
    dummy = *(ptr + 185);
    dummy = *(ptr + 186);
    dummy = *(ptr + 187);
    dummy = *(ptr + 188);
    dummy = *(ptr + 189);
    dummy = *(ptr + 190);
    dummy = *(ptr + 191);
    dummy = *(ptr + 192);
    dummy = *(ptr + 193);
    dummy = *(ptr + 194);
    dummy = *(ptr + 195);
    dummy = *(ptr + 196);
    dummy = *(ptr + 197);
    dummy = *(ptr + 198);
    dummy = *(ptr + 199);
    dummy = *(ptr + 200);
    dummy = *(ptr + 201);
    dummy = *(ptr + 202);
    dummy = *(ptr + 203);
    dummy = *(ptr + 204);
    dummy = *(ptr + 205);
    dummy = *(ptr + 206);
    dummy = *(ptr + 207);
    dummy = *(ptr + 208);
    dummy = *(ptr + 209);
    dummy = *(ptr + 210);
    dummy = *(ptr + 211);
    dummy = *(ptr + 212);
    dummy = *(ptr + 213);
    dummy = *(ptr + 214);
    dummy = *(ptr + 215);
    dummy = *(ptr + 216);
    dummy = *(ptr + 217);
    dummy = *(ptr + 218);
    dummy = *(ptr + 219);
    dummy = *(ptr + 220);
    dummy = *(ptr + 221);
    dummy = *(ptr + 222);
    dummy = *(ptr + 223);
    dummy = *(ptr + 224);
    dummy = *(ptr + 225);
    dummy = *(ptr + 226);
    dummy = *(ptr + 227);
    dummy = *(ptr + 228);
    dummy = *(ptr + 229);
    dummy = *(ptr + 230);
    dummy = *(ptr + 231);
    dummy = *(ptr + 232);
    dummy = *(ptr + 233);
    dummy = *(ptr + 234);
    dummy = *(ptr + 235);
    dummy = *(ptr + 236);
    dummy = *(ptr + 237);
    dummy = *(ptr + 238);
    dummy = *(ptr + 239);
    dummy = *(ptr + 240);
    dummy = *(ptr + 241);
    dummy = *(ptr + 242);
    dummy = *(ptr + 243);
    dummy = *(ptr + 244);
    dummy = *(ptr + 245);
    dummy = *(ptr + 246);
    dummy = *(ptr + 247);
    dummy = *(ptr + 248);
    dummy = *(ptr + 249);
    dummy = *(ptr + 250);
    dummy = *(ptr + 251);
    dummy = *(ptr + 252);
    dummy = *(ptr + 253);
    dummy = *(ptr + 254);
    dummy = *(ptr + 255);
    dummy = *(ptr + 256);
    dummy = *(ptr + 257);
    dummy = *(ptr + 258);
    dummy = *(ptr + 259);
    dummy = *(ptr + 260);
    dummy = *(ptr + 261);
    dummy = *(ptr + 262);
    dummy = *(ptr + 263);
    dummy = *(ptr + 264);
    dummy = *(ptr + 265);
    dummy = *(ptr + 266);
    dummy = *(ptr + 267);
    dummy = *(ptr + 268);
    dummy = *(ptr + 269);
    dummy = *(ptr + 270);
    dummy = *(ptr + 271);
    dummy = *(ptr + 272);
    dummy = *(ptr + 273);
    dummy = *(ptr + 274);
    dummy = *(ptr + 275);
    dummy = *(ptr + 276);
    dummy = *(ptr + 277);
    dummy = *(ptr + 278);
    dummy = *(ptr + 279);
    dummy = *(ptr + 280);
    dummy = *(ptr + 281);
    dummy = *(ptr + 282);
    dummy = *(ptr + 283);
    dummy = *(ptr + 284);
    dummy = *(ptr + 285);
    dummy = *(ptr + 286);
    dummy = *(ptr + 287);
    dummy = *(ptr + 288);
    dummy = *(ptr + 289);
    dummy = *(ptr + 290);
    dummy = *(ptr + 291);
    dummy = *(ptr + 292);
    dummy = *(ptr + 293);
    dummy = *(ptr + 294);
    dummy = *(ptr + 295);
    dummy = *(ptr + 296);
    dummy = *(ptr + 297);
    dummy = *(ptr + 298);
    dummy = *(ptr + 299);
    dummy = *(ptr + 300);
    dummy = *(ptr + 301);
    dummy = *(ptr + 302);
    dummy = *(ptr + 303);
    dummy = *(ptr + 304);
    dummy = *(ptr + 305);
    dummy = *(ptr + 306);
    dummy = *(ptr + 307);
    dummy = *(ptr + 308);
    dummy = *(ptr + 309);
    dummy = *(ptr + 310);
    dummy = *(ptr + 311);
    dummy = *(ptr + 312);
    dummy = *(ptr + 313);
    dummy = *(ptr + 314);
    dummy = *(ptr + 315);
    dummy = *(ptr + 316);
    dummy = *(ptr + 317);
    dummy = *(ptr + 318);
    dummy = *(ptr + 319);
    dummy = *(ptr + 320);
    dummy = *(ptr + 321);
    dummy = *(ptr + 322);
    dummy = *(ptr + 323);
    dummy = *(ptr + 324);
    dummy = *(ptr + 325);
    dummy = *(ptr + 326);
    dummy = *(ptr + 327);
    dummy = *(ptr + 328);
    dummy = *(ptr + 329);
    dummy = *(ptr + 330);
    dummy = *(ptr + 331);
    dummy = *(ptr + 332);
    dummy = *(ptr + 333);
    dummy = *(ptr + 334);
    dummy = *(ptr + 335);
    dummy = *(ptr + 336);
    dummy = *(ptr + 337);
    dummy = *(ptr + 338);
    dummy = *(ptr + 339);
    dummy = *(ptr + 340);
    dummy = *(ptr + 341);
    dummy = *(ptr + 342);
    dummy = *(ptr + 343);
    dummy = *(ptr + 344);
    dummy = *(ptr + 345);
    dummy = *(ptr + 346);
    dummy = *(ptr + 347);
    dummy = *(ptr + 348);
    dummy = *(ptr + 349);
    dummy = *(ptr + 350);
    dummy = *(ptr + 351);
    dummy = *(ptr + 352);
    dummy = *(ptr + 353);
    dummy = *(ptr + 354);
    dummy = *(ptr + 355);
    dummy = *(ptr + 356);
    dummy = *(ptr + 357);
    dummy = *(ptr + 358);
    dummy = *(ptr + 359);
    dummy = *(ptr + 360);
    dummy = *(ptr + 361);
    dummy = *(ptr + 362);
    dummy = *(ptr + 363);
    dummy = *(ptr + 364);
    dummy = *(ptr + 365);
    dummy = *(ptr + 366);
    dummy = *(ptr + 367);
    dummy = *(ptr + 368);
    dummy = *(ptr + 369);
    dummy = *(ptr + 370);
    dummy = *(ptr + 371);
    dummy = *(ptr + 372);
    dummy = *(ptr + 373);
    dummy = *(ptr + 374);
    dummy = *(ptr + 375);
    dummy = *(ptr + 376);
    dummy = *(ptr + 377);
    dummy = *(ptr + 378);
    dummy = *(ptr + 379);
    dummy = *(ptr + 380);
    dummy = *(ptr + 381);
    dummy = *(ptr + 382);
    dummy = *(ptr + 383);
    dummy = *(ptr + 384);
    dummy = *(ptr + 385);
    dummy = *(ptr + 386);
    dummy = *(ptr + 387);
    dummy = *(ptr + 388);
    dummy = *(ptr + 389);
    dummy = *(ptr + 390);
    dummy = *(ptr + 391);
    dummy = *(ptr + 392);
    dummy = *(ptr + 393);
    dummy = *(ptr + 394);
    dummy = *(ptr + 395);
    dummy = *(ptr + 396);
    dummy = *(ptr + 397);
    dummy = *(ptr + 398);
    dummy = *(ptr + 399);
    dummy = *(ptr + 400);
    dummy = *(ptr + 401);
    dummy = *(ptr + 402);
    dummy = *(ptr + 403);
    dummy = *(ptr + 404);
    dummy = *(ptr + 405);
    dummy = *(ptr + 406);
    dummy = *(ptr + 407);
    dummy = *(ptr + 408);
    dummy = *(ptr + 409);
    dummy = *(ptr + 410);
    dummy = *(ptr + 411);
    dummy = *(ptr + 412);
    dummy = *(ptr + 413);
    dummy = *(ptr + 414);
    dummy = *(ptr + 415);
    dummy = *(ptr + 416);
    dummy = *(ptr + 417);
    dummy = *(ptr + 418);
    dummy = *(ptr + 419);
    dummy = *(ptr + 420);
    dummy = *(ptr + 421);
    dummy = *(ptr + 422);
    dummy = *(ptr + 423);
    dummy = *(ptr + 424);
    dummy = *(ptr + 425);
    dummy = *(ptr + 426);
    dummy = *(ptr + 427);
    dummy = *(ptr + 428);
    dummy = *(ptr + 429);
    dummy = *(ptr + 430);
    dummy = *(ptr + 431);
    dummy = *(ptr + 432);
    dummy = *(ptr + 433);
    dummy = *(ptr + 434);
    dummy = *(ptr + 435);
    dummy = *(ptr + 436);
    dummy = *(ptr + 437);
    dummy = *(ptr + 438);
    dummy = *(ptr + 439);
    dummy = *(ptr + 440);
    dummy = *(ptr + 441);
    dummy = *(ptr + 442);
    dummy = *(ptr + 443);
    dummy = *(ptr + 444);
    dummy = *(ptr + 445);
    dummy = *(ptr + 446);
    dummy = *(ptr + 447);
    dummy = *(ptr + 448);
    dummy = *(ptr + 449);
    dummy = *(ptr + 450);
    dummy = *(ptr + 451);
    dummy = *(ptr + 452);
    dummy = *(ptr + 453);
    dummy = *(ptr + 454);
    dummy = *(ptr + 455);
    dummy = *(ptr + 456);
    dummy = *(ptr + 457);
    dummy = *(ptr + 458);
    dummy = *(ptr + 459);
    dummy = *(ptr + 460);
    dummy = *(ptr + 461);
    dummy = *(ptr + 462);
    dummy = *(ptr + 463);
    dummy = *(ptr + 464);
    dummy = *(ptr + 465);
    dummy = *(ptr + 466);
    dummy = *(ptr + 467);
    dummy = *(ptr + 468);
    dummy = *(ptr + 469);
    dummy = *(ptr + 470);
    dummy = *(ptr + 471);
    dummy = *(ptr + 472);
    dummy = *(ptr + 473);
    dummy = *(ptr + 474);
    dummy = *(ptr + 475);
    dummy = *(ptr + 476);
    dummy = *(ptr + 477);
    dummy = *(ptr + 478);
    dummy = *(ptr + 479);
    dummy = *(ptr + 480);
    dummy = *(ptr + 481);
    dummy = *(ptr + 482);
    dummy = *(ptr + 483);
    dummy = *(ptr + 484);
    dummy = *(ptr + 485);
    dummy = *(ptr + 486);
    dummy = *(ptr + 487);
    dummy = *(ptr + 488);
    dummy = *(ptr + 489);
    dummy = *(ptr + 490);
    dummy = *(ptr + 491);
    dummy = *(ptr + 492);
    dummy = *(ptr + 493);
    dummy = *(ptr + 494);
    dummy = *(ptr + 495);
    dummy = *(ptr + 496);
    dummy = *(ptr + 497);
    dummy = *(ptr + 498);
    dummy = *(ptr + 499);
    dummy = *(ptr + 500);
    dummy = *(ptr + 501);
    dummy = *(ptr + 502);
    dummy = *(ptr + 503);
    dummy = *(ptr + 504);
    dummy = *(ptr + 505);
    dummy = *(ptr + 506);
    dummy = *(ptr + 507);
    dummy = *(ptr + 508);
    dummy = *(ptr + 509);
    dummy = *(ptr + 510);
    dummy = *(ptr + 511);

}

void NOR_long_words_write(uint32_t *ptr)
{
    //Clear Lock bit
    HWREG16(FLASH_BASE + OFS_FCTL3) = FWKEY;

    //Enable long-word write
    HWREG16(FLASH_BASE + OFS_FCTL1) = FWKEY + BLKWRT;

    *(ptr + 0) = 0LL;
    *(ptr + 1) = 1LL;
    *(ptr + 2) = 2LL;
    *(ptr + 3) = 3LL;
    *(ptr + 4) = 4LL;
    *(ptr + 5) = 5LL;
    *(ptr + 6) = 6LL;
    *(ptr + 7) = 7LL;
    *(ptr + 8) = 8LL;
    *(ptr + 9) = 9LL;
    *(ptr + 10) = 10LL;
    *(ptr + 11) = 11LL;
    *(ptr + 12) = 12LL;
    *(ptr + 13) = 13LL;
    *(ptr + 14) = 14LL;
    *(ptr + 15) = 15LL;
    *(ptr + 16) = 16LL;
    *(ptr + 17) = 17LL;
    *(ptr + 18) = 18LL;
    *(ptr + 19) = 19LL;
    *(ptr + 20) = 20LL;
    *(ptr + 21) = 21LL;
    *(ptr + 22) = 22LL;
    *(ptr + 23) = 23LL;
    *(ptr + 24) = 24LL;
    *(ptr + 25) = 25LL;
    *(ptr + 26) = 26LL;
    *(ptr + 27) = 27LL;
    *(ptr + 28) = 28LL;
    *(ptr + 29) = 29LL;
    *(ptr + 30) = 30LL;
    *(ptr + 31) = 31LL;
    *(ptr + 32) = 32LL;
    *(ptr + 33) = 33LL;
    *(ptr + 34) = 34LL;
    *(ptr + 35) = 35LL;
    *(ptr + 36) = 36LL;
    *(ptr + 37) = 37LL;
    *(ptr + 38) = 38LL;
    *(ptr + 39) = 39LL;
    *(ptr + 40) = 40LL;
    *(ptr + 41) = 41LL;
    *(ptr + 42) = 42LL;
    *(ptr + 43) = 43LL;
    *(ptr + 44) = 44LL;
    *(ptr + 45) = 45LL;
    *(ptr + 46) = 46LL;
    *(ptr + 47) = 47LL;
    *(ptr + 48) = 48LL;
    *(ptr + 49) = 49LL;
    *(ptr + 50) = 50LL;
    *(ptr + 51) = 51LL;
    *(ptr + 52) = 52LL;
    *(ptr + 53) = 53LL;
    *(ptr + 54) = 54LL;
    *(ptr + 55) = 55LL;
    *(ptr + 56) = 56LL;
    *(ptr + 57) = 57LL;
    *(ptr + 58) = 58LL;
    *(ptr + 59) = 59LL;
    *(ptr + 60) = 60LL;
    *(ptr + 61) = 61LL;
    *(ptr + 62) = 62LL;
    *(ptr + 63) = 63LL;
    *(ptr + 64) = 64LL;
    *(ptr + 65) = 65LL;
    *(ptr + 66) = 66LL;
    *(ptr + 67) = 67LL;
    *(ptr + 68) = 68LL;
    *(ptr + 69) = 69LL;
    *(ptr + 70) = 70LL;
    *(ptr + 71) = 71LL;
    *(ptr + 72) = 72LL;
    *(ptr + 73) = 73LL;
    *(ptr + 74) = 74LL;
    *(ptr + 75) = 75LL;
    *(ptr + 76) = 76LL;
    *(ptr + 77) = 77LL;
    *(ptr + 78) = 78LL;
    *(ptr + 79) = 79LL;
    *(ptr + 80) = 80LL;
    *(ptr + 81) = 81LL;
    *(ptr + 82) = 82LL;
    *(ptr + 83) = 83LL;
    *(ptr + 84) = 84LL;
    *(ptr + 85) = 85LL;
    *(ptr + 86) = 86LL;
    *(ptr + 87) = 87LL;
    *(ptr + 88) = 88LL;
    *(ptr + 89) = 89LL;
    *(ptr + 90) = 90LL;
    *(ptr + 91) = 91LL;
    *(ptr + 92) = 92LL;
    *(ptr + 93) = 93LL;
    *(ptr + 94) = 94LL;
    *(ptr + 95) = 95LL;
    *(ptr + 96) = 96LL;
    *(ptr + 97) = 97LL;
    *(ptr + 98) = 98LL;
    *(ptr + 99) = 99LL;
    *(ptr + 100) = 100LL;
    *(ptr + 101) = 101LL;
    *(ptr + 102) = 102LL;
    *(ptr + 103) = 103LL;
    *(ptr + 104) = 104LL;
    *(ptr + 105) = 105LL;
    *(ptr + 106) = 106LL;
    *(ptr + 107) = 107LL;
    *(ptr + 108) = 108LL;
    *(ptr + 109) = 109LL;
    *(ptr + 110) = 110LL;
    *(ptr + 111) = 111LL;
    *(ptr + 112) = 112LL;
    *(ptr + 113) = 113LL;
    *(ptr + 114) = 114LL;
    *(ptr + 115) = 115LL;
    *(ptr + 116) = 116LL;
    *(ptr + 117) = 117LL;
    *(ptr + 118) = 118LL;
    *(ptr + 119) = 119LL;
    *(ptr + 120) = 120LL;
    *(ptr + 121) = 121LL;
    *(ptr + 122) = 122LL;
    *(ptr + 123) = 123LL;
    *(ptr + 124) = 124LL;
    *(ptr + 125) = 125LL;
    *(ptr + 126) = 126LL;
    *(ptr + 127) = 127LL;

    //Clear BLKWRT bit
    HWREG16(FLASH_BASE + OFS_FCTL1) = FWKEY;

    //Set LOCK bit
    HWREG16(FLASH_BASE + OFS_FCTL3) = FWKEY + LOCK;
}

__attribute__((ramfunc))
void NOR_block_write(uint32_t *ptr)
{
    uint8_t i, j;
    while ( HWREG8(FLASH_BASE + OFS_FCTL3) & BUSY ) ;
    HWREG16(FLASH_BASE + OFS_FCTL3) = FWKEY;

    for ( i = 0; i < 4; ++i ) {
        HWREG16(FLASH_BASE + OFS_FCTL1) = FWKEY + BLKWRT + WRT;

        for ( j = 0; j < 32; ++j ) {
            *ptr++ = 4;
            while ( !( HWREG8(FLASH_BASE + OFS_FCTL3) & WAIT) ) ;
        }

        HWREG16(FLASH_BASE + OFS_FCTL1) = FWKEY + WRT;
        while ( HWREG8(FLASH_BASE + OFS_FCTL3) & BUSY ) ;
    }

    HWREG16(FLASH_BASE + OFS_FCTL1) = FWKEY;
    HWREG16(FLASH_BASE + OFS_FCTL3) = FWKEY + LOCK;
}

void NOR_bank_erase(uint8_t *ptr)
{
    uint16_t interruptState;

    //Clear Lock bit
    HWREG16(FLASH_BASE + OFS_FCTL3) = FWKEY;

    while (HWREG8(FLASH_BASE + OFS_FCTL3) & BUSY);

    //FLASH34 errata: no concurrent access to flash bank while erasing
    interruptState = __get_interrupt_state();
    //Timer_A_disableInterrupt(TIMER_A2_BASE);
    __disable_interrupt();
    __no_operation();

    //Set MERAS bit
    HWREG16(FLASH_BASE + OFS_FCTL1) = FWKEY + MERAS;

    //Dummy write to erase Flash seg
    *ptr = 0;

    //test busy
    while (HWREG8(FLASH_BASE + OFS_FCTL3) & BUSY);

    //FLASH34 errata
    //Re-enable interrupt state to whatever it was before
//    if (interruptState & GIE)
//    {
//        //Timer_A_enableInterrupt(TIMER_A2_BASE);
//        __enable_interrupt();
//    }

    //Clear MERAS bit
    HWREG16(FLASH_BASE + OFS_FCTL1) = FWKEY;

    //Set LOCK bit
    HWREG16(FLASH_BASE + OFS_FCTL3) = FWKEY + LOCK;
}
